<div class="w-full text-end mx-auto container mb-12">
    <button mat-flat-button (click)="mostrarPdf()" [disabled]="loadingPdf" class="w-64">
        @if(loadingPdf){
            <mat-spinner diameter="20" strokeWidth="2"></mat-spinner>
        }
        @else{
            Imprimir el detalle de la reunión
        }
    </button>
</div>


@if (reunionVisualizada) {

    <h1 class="text-center text-2xl font-black text-purple-700">
        {{ reunionVisualizada.version['proyecto'].nombre }}
    </h1>
    <h2 class="text-center text-2xl font-black text-purple-700">
        {{ reunionVisualizada.version['nombre'] }}
    </h2>
    <h2 class="text-center text-2xl font-black text-purple-700">
        {{ reunionVisualizada.nombre }}
    </h2>
    
    <main class="container mx-auto space-y-2 mt-8">
    
        <p class="text-lg">
            <b>
                Lugar: 
            </b>
            {{ reunionVisualizada.lugar }}
        </p>
    
        <p class="text-lg">
            <b>
                Fecha y hora de la reunión: 
            </b>
            {{ reunionVisualizada.createdAt }}
        </p>
    
        <div class="flex justify-center gap-2 flex-wrap mt-4">
            <table class="text-center w-full">
                <th class="border-b-2 border-purple-700 text-purple-700 bg-purple-100 py-3">Encargados de la reunión</th>
                <tbody>
                    @for (item of reunionVisualizada['encargado de reunion']; track $index) {
                        <tr class="border-b border-purple-700 bg-purple-100">
                            @if(!item.visitante){
                                <td class="py-2">{{ item.usuario['nombre'] }}</td>            
                            }
                        </tr>
                    }
                </tbody>
            </table>
    
            <div class="w-full">
                <p class="font-black text-2xl text-purple-700 mt-6">Puntos de la reunión</p>
        
                @for (item of reunionVisualizada['puntos de reunion']; track $index) {
                    <p>{{ item['nombre'] }}</p>               
        
                }
            </div>
    
    
    
    
        </div>
    
        <h1 class="font-black text-2xl text-purple-700 mt-6">Desarrollo de la reunión</h1>
    
        <div [innerHTML]="reunionVisualizada.minutadereunion[0].minuta"></div>
    
        <div class="w-full">
            <p class="font-black text-2xl text-purple-700 mt-6">Acuerdos de la reunión</p>
    
            @for (item of reunionVisualizada['acuerdos de reunion']; track $index) {
                <p>{{ item['nombre'] }}</p>               
    
            }
        </div>

        <div>

            <table class="w-full mt-8">
                <thead class="border-b-2 border-purple-700 text-purple-700 bg-purple-100 py-3">
                    <th class="py-2">Participante</th>
                    <th class="py-2">Institución</th>
                    <th class="py-2">Cargo</th>
                    <th class="py-2">Correo</th>
                    <th class="py-2">Teléfono</th>
                    <th class="py-2">Documento de Identidad</th>
                </thead>
                <tbody>
                    @for (item of reunionVisualizada['asistencia reunion']; track $index) {
                        <tr class="border-b border-purple-700 bg-purple-100 text-center">
                            <td class="py-1"> {{ item.participante }} </td>
                            <td> {{ item.institucion }} </td>
                            <td> {{ item.cargo }} </td>
                            <td> {{ item.correo }} </td>
                            <td> {{ item.telefono }} </td>
                            <td> {{ item.doc_identidad }} </td>
                        </tr>
                    }
                </tbody>
            </table>

        </div>
    </main>

} @else {

    <div class="container mx-auto bg-red-100 rounded p-4">
        <p class="text-red-700 text-lg font-bold">
            Error:
        </p>
        <p class="text-red-700 text-lg">
            No se pudo obtener la información de la reunión, es necesario contactar a un administrador.
        </p>
    </div>

}
